<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCg251SA39YSg5p7lZ20Oe4BSzQFB4bm1E",
        authDomain: "employee-service-portal-b753b.firebaseapp.com",
        projectId: "employee-service-portal-b753b",
        storageBucket: "employee-service-portal-b753b.firebasestorage.app",
        messagingSenderId: "787703437938",
        appId: "1:787703437938:web:383b6f148067a0590400eb",
        measurementId: "G-DNMT4J7RGL"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    let mode = "login";
    // Yahan maine filename change kar diya hai
    const targetURL = "Dashboard.html"; 

    function switchMode() {
        const title = document.getElementById("title");
        const btn = document.getElementById("mainBtn");
        const toggleText = document.getElementById("toggleText");
        const msg = document.getElementById("msg");
        msg.style.display = "none";

        if (mode === "login") {
            mode = "signup";
            title.innerText = "Create Account";
            btn.innerText = "Register Now";
            toggleText.innerHTML = 'Already registered? <span onclick="switchMode()">Sign In</span>';
        } else {
            mode = "login";
            title.innerText = "Service Portal";
            btn.innerText = "Login to Portal";
            toggleText.innerHTML = 'New User? <span onclick="switchMode()">Create Account</span>';
        }
    }

    function submitForm() {
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();
        const btn = document.getElementById("mainBtn");
        
        if (!email || !password) {
            showMsg("Please enter both email and password", "error");
            return;
        }

        btn.disabled = true;
        btn.innerText = "Processing...";

        if (mode === "signup") {
            auth.createUserWithEmailAndPassword(email, password)
                .then(() => {
                    showMsg("Account created! Redirecting...", "success");
                    // Redirecting to Dashboard.html
                    setTimeout(() => { window.location.href = targetURL; }, 1500);
                })
                .catch(err => {
                    showMsg(err.message, "error");
                    btn.disabled = false;
                    btn.innerText = "Register Now";
                });
        } else {
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    showMsg("Authorized! Redirecting...", "success");
                    // Redirecting to Dashboard.html
                    setTimeout(() => { window.location.href = targetURL; }, 1000);
                })
                .catch(err => {
                    showMsg("Invalid Credentials or User not found", "error");
                    btn.disabled = false;
                    btn.innerText = "Login to Portal";
                });
        }
    }

    function showMsg(text, type) {
        const msg = document.getElementById("msg");
        msg.innerText = text;
        msg.className = `msg ${type}`;
        msg.style.display = "block";
    }
</script>
